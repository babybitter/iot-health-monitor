# 灵枢监测助手

一个智能健康监测Android应用，提供环境监测、人体监测和智能设备控制功能。

## 新增功能

### 主题切换功能
- **位置**: 主页右上角的主题切换按钮
- **功能**: 点击按钮弹出主题选择对话框
- **选项**: 
  - 明亮主题 (Light theme)
  - 暗黑主题 (Dark theme) 
  - 跟随系统 (System default)
- **使用方法**: 
  1. 在主页点击右上角的主题图标
  2. 在弹出的对话框中选择想要的主题
  3. 应用会立即切换到选中的主题

### 主题管理
- 主题设置会自动保存，下次启动应用时会应用上次选择的主题
- 支持系统级暗色模式跟随
- 主题图标会根据当前选择的主题自动更新

## 技术实现

### 主题管理器 (ThemeManager)
- 使用SharedPreferences保存主题设置
- 支持三种主题模式：明亮、暗黑、跟随系统
- 提供主题切换和应用功能

### 主题选择对话框 - 圆润现代化设计
- **圆润弹窗**: 使用28dp圆角，让对话框更加圆润现代
- **简洁布局**: 完全模仿原设计图的简洁风格
- **圆角选项**: 每个主题选项都有12dp圆角背景
- **视觉反馈**: 选中状态有蓝色背景和边框高亮
- **标准单选**: 使用传统RadioGroup布局，保持简洁
- **响应式设计**: 支持明暗主题的颜色适配

### 底部导航栏
- 保持原有的简洁设计
- 支持主题切换时的颜色适配

### 设计特色 - 圆润现代化风格
- **圆润美学**: 对话框和选项都采用圆角设计，告别尖锐边角
- **简洁布局**: 完全按照设计图模仿，保持简洁清爽的风格
- **视觉反馈**: 选中状态有明显的颜色变化和边框高亮
- **现代配色**: 精心调配的颜色方案，支持明暗主题
- **流畅交互**: 点击选项即可切换，操作简单直观
- **一致性设计**: 保持与原设计图完全一致的视觉风格

### AI助手Markdown支持 - 智能文本渲染
- **自动识别**: 智能检测AI回复中的Markdown语法
- **富文本渲染**: 支持标题、粗体、列表等Markdown格式
- **完美显示**: 将AI助手的结构化回复正确转换为富文本
- **可选择文本**: 支持文本选择和复制功能
- **响应式布局**: 自适应不同长度的Markdown内容
- **性能优化**: 高效的文本渲染，不影响聊天流畅性

## 文件结构

```
app/src/main/
├── java/com/lingshu/smart/monitor/
│   ├── utils/
│   │   ├── ThemeManager.kt            # 主题管理器
│   │   └── MarkdownUtils.java         # Markdown渲染工具
│   ├── adapter/ChatMessageAdapter.kt  # 聊天消息适配器(支持Markdown)
│   └── ui/home/HomeFragment.java      # 主页Fragment，包含主题切换功能
├── res/
│   ├── layout/
│   │   ├── fragment_home.xml          # 主页布局，包含主题切换按钮
│   │   └── dialog_theme_selection.xml # 主题选择对话框布局
│   ├── drawable/
│   │   ├── ic_theme_light_modern.xml  # 现代化明亮主题图标
│   │   ├── ic_theme_dark_modern.xml   # 现代化暗黑主题图标
│   │   └── ic_theme_system_modern.xml # 现代化系统主题图标
│   └── values/
│       ├── themes.xml                 # 明亮主题样式
│       └── values-night/themes.xml    # 暗黑主题样式
```

## 使用说明

### 主题切换
1. **启动应用**: 应用会自动应用上次保存的主题设置
2. **切换主题**: 在主页点击右上角的主题图标，选择想要的主题
3. **主题效果**: 整个应用界面会立即切换到选中的主题风格

### AI助手Markdown功能
1. **自动渲染**: AI助手回复包含Markdown语法时会自动渲染为富文本
2. **支持格式**: 标题(###)、粗体(**文本**)、列表(- 项目)等
3. **文本选择**: 长按消息可选择和复制文本内容
4. **完美显示**: 结构化的健康建议和数据分析更易阅读

## 开发环境

- Android Studio
- Gradle 8.13
- Android API 35
- Java 8+
- Kotlin
